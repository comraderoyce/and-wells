box: devillex/docker-firebase
build:
  steps:
    - install-packages:
        packages: git npm
    - arjen/hugo-build:
        version: "0.37"
        theme: hyde-royce
        config: config.toml
        flags: --buildDrafts
    - npm-install:
      package: firebase-tools
      strict-ssl: false

deploy:
  steps:
    - s3sync:
        key_id: $KEY
        key_secret: $SECRET
        bucket_url: $URL
        source_dir: public/
        opts: --acl-public --add-header=Cache-Control:max-age=604800 --no-ssl
    - devillex/firebase-deploy@1.0.0:
        project: $FIREBASE_PROJECT_NAME
        token: $FIREBASE_TOKEN